<section data-sec='window-2024' id='windowsystem2024s' class="window-system2024" data-width="600px" data-height="400px"
    data-top="100px" data-left="10px" style="background: transparent;">
    <div style="
    width: 100%;
    height: auto;
    background: white;
    color: white;
    padding-top: 4px;
    border-radius: 5px;">

        <div class="useful-toolbar" style="
        border-bottom: 1px solid black;height: 25px;">
            <div style="display: flex;height: 100%;"><img src="./gnome-ico/close.svg" class="close-system-window"
                    style="width: 14px !important;"><img src="./gnome-ico/chgres.svg" class="chgres-system-window"><img
                    src="./gnome-ico/min.svg" class="min-system-window" style="width: 14px !important;"></div>
            <!-- Change Your Title-->
            <p class="title-system-0123" style="color:black;">Terminal</p>
            <img src="./applications/terminal/term.svg" class="appico-system-window-0123">
        </div>
    </div>
    <div class="therest" style="
    height: 95%;
    overflow: hidden;
    overflow-y: scroll;
    background: rgba(0, 0, 0, 0.6);
    border-radius: 0px 0px 0px 5px;">
        <div class="stdin" style="display: flex;flex-direction:column;"><input style="
    background: transparent;
    border: 0;
    outline: 0;
    word-break: break-all;
    font-family:sans-serif;
    width:100%;
    resize:none;
    color: white;
    font-size: 18px;
    letter-spacing: 2px;" class="stdii"></div>
    </div>

    <script class="application-script">
        function inputting() {
            $('.window-system2024').find('.stdii').off('keydown').on('keydown', async function (event) {
                if (event.key == 'Enter') {

                    $(this).css('height', 'min-content')

                    $(this).prop('disabled', true)
                    $('.window-system2024').find('.therest').append(`<div class="stdin" style="display: flex;flex-direction:column;"><input type='text' style="background: transparent;border: 0;outline: 0;word-break: break-all;font-family:sans-serif;width:100%;resize:none;color: white;font-size: 18px;letter-spacing: 2px;" class="stdii"></div></div>`)
                    $('.window-system2024').find('.stdii').last().val('hello@loai:-$ ')
                    inputtrap()

                    let len = $(this).val().split('hello@loai:-$ ')[1]
                    console.log($(this).val())
                    let list = len.split(' ')
                    let first = list.shift()
                    
                    list = list.join(' ')
                    console.log(first,list)
                    list = [first, list]
                    console.log(list)
                    console.log(first)
                    let fet = await fetch(`./applications/terminal/terminal-tools/${list[0]}.jst`)
                    let text = await fet.text()
                    text = text.replaceAll('terminal-params', `"${list[1]}"`)


                    eval(text)
                    inputting()



                }
            })
        }
        function increase() {
            $('.window-system2024').find('.stdii-continue').off('keydown').on('keydown', async function (event) {
                if ($(this).scrollLeft() > 0) {

                    $(this).closest('.stdin').append(`<input type='text' style="background: transparent;border: 0;outline: 0;word-break: break-all;font-family:sans-serif;width:100%;resize:none;color: white;font-size: 18px;letter-spacing: 2px;" class="stdii-continue">`)
                    $('.window-system2024').find('.stdii-continue').last().focus()

                    increase()

                }
                console.log($(this).val().length)
                if (event.key == 'Backspace' && $(this).val().length <= 1) {
                    let index = $(this).closest('.stdin').find('.stdii-continue').index($(this))

                    if (index == 0) { $(this).closest('.stdin').find('.stdii').focus(); console.log(true) } else { $('.stdii-continue')[index - 1].focus() }
                    // easy
                    $(this).remove()
                }
                if (event.key == 'Enter') {
                    let list = []
                    $('.window-system2024').find('.therest').append(`<div class="stdin" style="display: flex;flex-direction:row;"><input type='text' style="background: transparent;border: 0;outline: 0;word-break: break-all;font-family:sans-serif;width:100%;resize:none;color: white;font-size: 18px;letter-spacing: 2px;" class="stdii"></div></div>`)
                    $('.window-system2024').find('.stdii').last().val('hello@loai:-$ ')
                    $('.window-system2024').find('.stdii').last().focus()
                    $(this).closest('.stdin').find('.stdii-continue').toArray().forEach((e) => { list.push(e.value) })
                    list = list.join('')
                    let fst = $(this).closest('.stdin').find('.stdii').val().split('hello@loai:-$ ')
                    fst.shift()
                    fst = `${fst.join('')}${list}`
                    let terminalpar = fst.split(' ')
                    let term = terminalpar.shift()
                    terminalpar = terminalpar.join(' ')
                    terminalpar = [term, terminalpar]

                        console.log(terminalpar[0])
                        let fet = await fetch(`./applications/terminal/terminal-tools/${terminalpar[0]}.jst`)
                        if(!fet.ok){console.log(true)}
                        let text = await fet.text()
                        text = text.replaceAll('terminal-params', `"${terminalpar[1]}"`)


                        eval(text)

                    inputting()


                }
            })
        }
        function inputtrap() {
            $('.window-system2024').find('.stdii').off('input').on('input', function (event) {
                let len = $(this).val().split('hello@loai:-$ ')
                console.log(len)

                if ($(this).scrollLeft() > 0) {
                    $(this).closest('.stdin').append(`<input type='text' style="background: transparent;border: 0;outline: 0;word-break: break-all;font-family:sans-serif;width:100%;resize:none;color: white;font-size: 18px;letter-spacing: 2px;" class="stdii-continue">`)
                    $('.window-system2024').find('.stdii-continue').last().focus()
                    increase()
                }


                if (len.length < 2) {
                    setTimeout(() => {
                        $(this).val('hello@loai:-$ ')

                    }, 1);
                }

            })
        }
        function append_to_window(create, point, html) {
            if (create == true) {
                $('.window-system2024').append(point)

            } else {
                $('.window-system2024').find(point).append(html)

            }
        }

        function main_window() {

            function disable_backspace(event) {

                if (event.key == 'Backspace') {
                    event.preventDefault()
                }
            }
            $('.window-system2024').find('.stdii').val('hello@loai:-$ ')
            inputtrap()
            inputting()

        }
        main_window()
    </script>
</section>